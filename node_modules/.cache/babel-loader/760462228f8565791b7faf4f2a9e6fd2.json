{"ast":null,"code":"import warning from 'warning';\nimport React, { Component, PureComponent, isValidElement } from 'react';\nimport { ticks } from 'd3-array';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar prfx = 'react-compound-slider:';\n\nfunction getSortByVal() {\n  var reversed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  return function sortByVal(a, b) {\n    if (a.val > b.val) {\n      return reversed ? -1 : 1;\n    }\n\n    if (b.val > a.val) {\n      return reversed ? 1 : -1;\n    }\n\n    return 0;\n  };\n}\n\nfunction getUpdatedHandles(handles, updateKey, updateValue) {\n  var reversed = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var index = handles.findIndex(function (v) {\n    return v.key === updateKey;\n  });\n\n  if (index !== -1) {\n    var _handles$index = handles[index],\n        key = _handles$index.key,\n        val = _handles$index.val;\n\n    if (val === updateValue) {\n      return handles;\n    }\n\n    return [].concat(_toConsumableArray(handles.slice(0, index)), [{\n      key: key,\n      val: updateValue\n    }], _toConsumableArray(handles.slice(index + 1))).sort(getSortByVal(reversed));\n  }\n\n  return handles;\n}\n\nfunction getSliderDomain(slider, vertical) {\n  if (!slider) {\n    return [0, 0];\n  }\n\n  var s = slider.getBoundingClientRect();\n  var d0 = vertical ? s.top : s.left;\n  var d1 = vertical ? s.bottom : s.right;\n  return [d0, d1];\n}\n\nfunction isNotValidTouch(_ref) {\n  var _ref$type = _ref.type,\n      type = _ref$type === void 0 ? '' : _ref$type,\n      touches = _ref.touches;\n  return !touches || touches.length > 1 || type.toLowerCase() === 'touchend' && touches.length > 0;\n}\n\nfunction getTouchPosition(vertical, e) {\n  return vertical ? e.touches[0].clientY : e.touches[0].pageX;\n}\n\nfunction getHandles() {\n  var values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var reversed = arguments.length > 1 ? arguments[1] : undefined;\n  var valueToStep = arguments.length > 2 ? arguments[2] : undefined;\n  var warn = arguments.length > 3 ? arguments[3] : undefined;\n  var changes = 0;\n  var handles = values.map(function (x) {\n    var val = valueToStep.getValue(x);\n\n    if (x !== val) {\n      changes += 1;\n      warning(!warn, \"\".concat(prfx, \" Invalid value encountered. Changing \").concat(x, \" to \").concat(val, \".\"));\n    }\n\n    return val;\n  }).map(function (val, i) {\n    return {\n      key: \"$$-\".concat(i),\n      val: val\n    };\n  }).sort(getSortByVal(reversed));\n  return {\n    handles: handles,\n    changes: changes\n  };\n} // default mode\n\n\nfunction mode1(_, next) {\n  return next;\n} // prevent duplicate values and crossing\n\n\nfunction mode2(curr, next) {\n  for (var i = 0; i < curr.length; i++) {\n    if (curr[i].key !== next[i].key) {\n      return curr;\n    }\n\n    if (next[i + 1] && next[i].val === next[i + 1].val) {\n      return curr;\n    }\n  }\n\n  return next;\n} // pushable mode\n\n\nfunction mode3(curr, next, step, reversed, getValue) {\n  var indexForMovingHandle = -1;\n  var handleMoveIsPositive = true;\n\n  for (var i = 0; i < curr.length; i++) {\n    var c = curr[i];\n    var n = next[i]; // make sure keys are in same order if not return curr\n\n    if (!n || n.key !== c.key) {\n      return curr;\n    } else if (n.val !== c.val) {\n      indexForMovingHandle = i;\n      handleMoveIsPositive = n.val - c.val > 0;\n    }\n  } // nothing has changed (shouldn't happen but just in case).\n\n\n  if (indexForMovingHandle === -1) {\n    return curr;\n  } else {\n    var increment = handleMoveIsPositive ? step : -step;\n\n    for (var _i = 0; _i < next.length; _i++) {\n      var n0 = next[_i];\n      var n1 = next[_i + 1];\n\n      if (n1 && n0.val === n1.val) {\n        if (_i === indexForMovingHandle) {\n          var newStep = n1.val + increment;\n\n          if (getValue(newStep) === newStep) {\n            var clone = getUpdatedHandles(next, n1.key, n1.val + increment, reversed);\n            var check = mode3(next, clone, step, reversed, getValue);\n\n            if (check === next) {\n              return curr;\n            } else {\n              return check;\n            }\n          } else {\n            return curr;\n          }\n        } else {\n          var _newStep = n0.val + increment;\n\n          if (getValue(_newStep) === _newStep) {\n            var _clone = getUpdatedHandles(next, n0.key, n0.val + increment, reversed);\n\n            var _check = mode3(next, _clone, step, reversed, getValue);\n\n            if (_check === next) {\n              return curr;\n            } else {\n              return _check;\n            }\n          } else {\n            return curr;\n          }\n        }\n      }\n    }\n  }\n\n  return next;\n}\n\nfunction callAll() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (e) {\n    return fns.forEach(function (fn) {\n      return fn && fn(e);\n    });\n  };\n}\n\nvar NOOP = function NOOP() {\n  return {\n    value: 0,\n    percent: 0\n  };\n};\n\nvar Rail = /*#__PURE__*/function (_Component) {\n  _inherits(Rail, _Component);\n\n  var _super = _createSuper(Rail);\n\n  function Rail() {\n    var _this;\n\n    _classCallCheck(this, Rail);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.getRailProps = function () {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$props = _this.props,\n          emitMouse = _this$props.emitMouse,\n          emitTouch = _this$props.emitTouch;\n      return _objectSpread2(_objectSpread2({}, props), {}, {\n        onMouseDown: callAll(props && props.onMouseDown, emitMouse),\n        onTouchStart: callAll(props && props.onTouchStart, emitTouch)\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Rail, [{\n    key: \"render\",\n    value: function render() {\n      var getRailProps = this.getRailProps,\n          _this$props2 = this.props,\n          getEventData = _this$props2.getEventData,\n          _this$props2$activeHa = _this$props2.activeHandleID,\n          activeHandleID = _this$props2$activeHa === void 0 ? '' : _this$props2$activeHa,\n          children = _this$props2.children;\n      var renderedChildren = children({\n        getEventData: getEventData || NOOP,\n        activeHandleID: activeHandleID,\n        getRailProps: getRailProps\n      });\n      return renderedChildren && React.Children.only(renderedChildren);\n    }\n  }]);\n\n  return Rail;\n}(Component);\n\nvar Handles = /*#__PURE__*/function (_Component) {\n  _inherits(Handles, _Component);\n\n  var _super = _createSuper(Handles);\n\n  function Handles() {\n    var _this;\n\n    _classCallCheck(this, Handles);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.autofocus = function (e) {\n      if (e.target instanceof HTMLElement) {\n        e.target.focus();\n      }\n    };\n\n    _this.getHandleProps = function (id) {\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _this$props = _this.props,\n          emitKeyboard = _this$props.emitKeyboard,\n          emitMouse = _this$props.emitMouse,\n          emitTouch = _this$props.emitTouch;\n      return _objectSpread2(_objectSpread2({}, props), {}, {\n        onKeyDown: callAll(props && props.onKeyDown, function (e) {\n          return emitKeyboard && emitKeyboard(e, id);\n        }),\n        onMouseDown: callAll(props && props.onMouseDown, _this.autofocus, function (e) {\n          return emitMouse && emitMouse(e, id);\n        }),\n        onTouchStart: callAll(props && props.onTouchStart, function (e) {\n          return emitTouch && emitTouch(e, id);\n        })\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Handles, [{\n    key: \"render\",\n    value: function render() {\n      var getHandleProps = this.getHandleProps,\n          _this$props2 = this.props,\n          _this$props2$activeHa = _this$props2.activeHandleID,\n          activeHandleID = _this$props2$activeHa === void 0 ? '' : _this$props2$activeHa,\n          children = _this$props2.children,\n          _this$props2$handles = _this$props2.handles,\n          handles = _this$props2$handles === void 0 ? [] : _this$props2$handles;\n      var renderedChildren = children({\n        handles: handles,\n        activeHandleID: activeHandleID,\n        getHandleProps: getHandleProps\n      });\n      return renderedChildren && React.Children.only(renderedChildren);\n    }\n  }]);\n\n  return Handles;\n}(Component);\n\nvar LinearScale = /*#__PURE__*/function () {\n  function LinearScale() {\n    _classCallCheck(this, LinearScale);\n\n    this.interpolator = void 0;\n    this.domain = [0, 1];\n    this.range = [0, 1];\n    this.domain = [0, 1];\n    this.range = [0, 1];\n    this.interpolator = null;\n  }\n\n  _createClass(LinearScale, [{\n    key: \"createInterpolator\",\n    value: function createInterpolator(domain, range) {\n      var _this = this;\n\n      var d0 = domain[0];\n      var d1 = domain[1];\n      var r0 = range[0];\n      var r1 = range[1];\n\n      if (d1 < d0) {\n        return function (x) {\n          return _this.interpolateValue(r1, r0)(_this.deinterpolateValue(d1, d0)(x));\n        };\n      } else {\n        return function (x) {\n          return _this.interpolateValue(r0, r1)(_this.deinterpolateValue(d0, d1)(x));\n        };\n      }\n    }\n  }, {\n    key: \"interpolateValue\",\n    value: function interpolateValue(a, b) {\n      return a = +a, b -= a, function i(t) {\n        return a + b * t;\n      };\n    }\n  }, {\n    key: \"deinterpolateValue\",\n    value: function deinterpolateValue(a, b) {\n      return (b -= a = +a) ? function (x) {\n        return (x - a) / b;\n      } : function () {\n        return b;\n      };\n    }\n  }, {\n    key: \"rescale\",\n    value: function rescale() {\n      this.interpolator = null;\n      return this;\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue(x) {\n      var domain = this.domain,\n          range = this.range;\n      return (this.interpolator || (this.interpolator = this.createInterpolator(domain, range)))(+x);\n    }\n  }, {\n    key: \"setDomain\",\n    value: function setDomain(val) {\n      this.domain = [val[0], val[1]];\n      this.rescale();\n      return this;\n    }\n  }, {\n    key: \"getDomain\",\n    value: function getDomain() {\n      return this.domain;\n    }\n  }, {\n    key: \"setRange\",\n    value: function setRange(val) {\n      this.range = [val[0], val[1]];\n      return this;\n    }\n  }, {\n    key: \"getRange\",\n    value: function getRange() {\n      return this.range;\n    }\n  }, {\n    key: \"getTicks\",\n    value: function getTicks(count) {\n      var d = this.domain;\n      return ticks(d[0], d[d.length - 1], count ? count : 10);\n    }\n  }]);\n\n  return LinearScale;\n}();\n\nvar defaultGetEventData$1 = function defaultGetEventData() {\n  return {\n    value: 0,\n    percent: 0\n  };\n};\n\nvar Ticks = /*#__PURE__*/function (_Component) {\n  _inherits(Ticks, _Component);\n\n  var _super = _createSuper(Ticks);\n\n  function Ticks() {\n    _classCallCheck(this, Ticks);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Ticks, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          values = _this$props.values,\n          _this$props$scale = _this$props.scale,\n          scale = _this$props$scale === void 0 ? new LinearScale() : _this$props$scale,\n          _this$props$count = _this$props.count,\n          count = _this$props$count === void 0 ? 10 : _this$props$count,\n          _this$props$getEventD = _this$props.getEventData,\n          getEventData = _this$props$getEventD === void 0 ? defaultGetEventData$1 : _this$props$getEventD,\n          _this$props$activeHan = _this$props.activeHandleID,\n          activeHandleID = _this$props$activeHan === void 0 ? '' : _this$props$activeHan;\n      var ticks = (values ? values : scale.getTicks(count)).map(function (value) {\n        return {\n          id: \"$$-\".concat(value),\n          value: value,\n          percent: scale.getValue(value)\n        };\n      });\n      var renderedChildren = children({\n        getEventData: getEventData,\n        activeHandleID: activeHandleID,\n        ticks: ticks\n      });\n      return renderedChildren && React.Children.only(renderedChildren);\n    }\n  }]);\n\n  return Ticks;\n}(Component);\n\nvar defaultGetEventData = function defaultGetEventData() {\n  return {\n    value: 0,\n    percent: 0\n  };\n};\n\nvar Tracks = /*#__PURE__*/function (_Component) {\n  _inherits(Tracks, _Component);\n\n  var _super = _createSuper(Tracks);\n\n  function Tracks() {\n    var _this;\n\n    _classCallCheck(this, Tracks);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.getTrackProps = function (props) {\n      var _this$props = _this.props,\n          emitMouse = _this$props.emitMouse,\n          emitTouch = _this$props.emitTouch;\n      return _objectSpread2(_objectSpread2({}, props || {}), {}, {\n        onMouseDown: callAll(props && props.onMouseDown, emitMouse),\n        onTouchStart: callAll(props && props.onTouchStart, emitTouch)\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Tracks, [{\n    key: \"render\",\n    value: function render() {\n      var getTrackProps = this.getTrackProps,\n          _this$props2 = this.props,\n          children = _this$props2.children,\n          _this$props2$left = _this$props2.left,\n          left = _this$props2$left === void 0 ? true : _this$props2$left,\n          _this$props2$right = _this$props2.right,\n          right = _this$props2$right === void 0 ? true : _this$props2$right,\n          _this$props2$scale = _this$props2.scale,\n          scale = _this$props2$scale === void 0 ? new LinearScale() : _this$props2$scale,\n          _this$props2$handles = _this$props2.handles,\n          handles = _this$props2$handles === void 0 ? [] : _this$props2$handles,\n          _this$props2$getEvent = _this$props2.getEventData,\n          getEventData = _this$props2$getEvent === void 0 ? defaultGetEventData : _this$props2$getEvent,\n          _this$props2$activeHa = _this$props2.activeHandleID,\n          activeHandleID = _this$props2$activeHa === void 0 ? '' : _this$props2$activeHa;\n      var domain = scale.getDomain();\n      var tracks = [];\n\n      for (var i = 0; i < handles.length + 1; i++) {\n        var source = handles[i - 1];\n        var target = handles[i];\n\n        if (i === 0 && left === true) {\n          source = {\n            id: '$',\n            value: domain[0],\n            percent: 0\n          };\n        } else if (i === handles.length && right === true) {\n          target = {\n            id: '$',\n            value: domain[1],\n            percent: 100\n          };\n        }\n\n        if (source && target) {\n          tracks.push({\n            id: \"\".concat(source.id, \"-\").concat(target.id),\n            source: source,\n            target: target\n          });\n        }\n      }\n\n      var renderedChildren = children({\n        getEventData: getEventData,\n        activeHandleID: activeHandleID,\n        tracks: tracks,\n        getTrackProps: getTrackProps\n      });\n      return renderedChildren && React.Children.only(renderedChildren);\n    }\n  }]);\n\n  return Tracks;\n}(Component);\n\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\nvar DiscreteScale = /*#__PURE__*/_createClass(function DiscreteScale() {\n  var _this = this;\n\n  _classCallCheck(this, DiscreteScale);\n\n  this.step = 1;\n  this.domain = [0, 1];\n  this.range = [0, 1];\n\n  this.setDomain = function (val) {\n    _this.domain = [val[0], val[1]];\n    return _this;\n  };\n\n  this.setRange = function (val) {\n    _this.range = [val[0], val[1]];\n    return _this;\n  };\n\n  this.setStep = function (val) {\n    _this.step = val;\n    return _this;\n  };\n\n  this.getValue = function (x) {\n    var _this$domain = _slicedToArray(_this.domain, 2),\n        d0 = _this$domain[0],\n        d1 = _this$domain[1],\n        _this$range = _slicedToArray(_this.range, 2),\n        r0 = _this$range[0],\n        r1 = _this$range[1],\n        step = _this.step;\n\n    var p = (clamp(x, d0, d1) - d0) / (d1 - d0);\n    var b = step * Math.round(p * (r1 - r0) / step) + r0;\n    return clamp(b, r0 < r1 ? r0 : r1, r1 > r0 ? r1 : r0);\n  };\n});\n\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nvar noop = function noop() {};\n\nvar compare = function compare(b) {\n  return function (m, d, i) {\n    return m && b[i] === d;\n  };\n};\n\nvar equal = function equal(a, b) {\n  return a === b || a.length === b.length && a.reduce(compare(b), true);\n};\n\nvar isRCSComponent = function isRCSComponent(item) {\n  if (! /*#__PURE__*/isValidElement(item)) {\n    return false;\n  }\n\n  var type = item.type;\n  var name = type ? type.name : '';\n  return name === Handles.name || name === Rail.name || name === Ticks.name || name === Tracks.name;\n};\n\nvar getNextValue = function getNextValue(curr, step, domain, reversed) {\n  var newVal = reversed ? curr - step : curr + step;\n  return reversed ? Math.max(domain[0], newVal) : Math.min(domain[1], newVal);\n};\n\nvar getPrevValue = function getPrevValue(curr, step, domain, reversed) {\n  var newVal = reversed ? curr + step : curr - step;\n  return reversed ? Math.min(domain[1], newVal) : Math.max(domain[0], newVal);\n};\n\nvar defaultDomain = [0, 100];\n\nvar Slider = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Slider, _PureComponent);\n\n  var _super = _createSuper(Slider);\n\n  function Slider() {\n    var _this;\n\n    _classCallCheck(this, Slider);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      step: 0.1,\n      values: [],\n      domain: defaultDomain,\n      handles: [],\n      reversed: false,\n      activeHandleID: '',\n      valueToPerc: null,\n      valueToStep: null,\n      pixelToStep: null\n    };\n    _this.slider = /*#__PURE__*/React.createRef();\n\n    _this.onKeyDown = function (e, handleID) {\n      var validUpKeys = ['ArrowRight', 'ArrowUp'];\n      var validDownKeys = ['ArrowDown', 'ArrowLeft'];\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          handles = _assertThisInitialize.state.handles,\n          _assertThisInitialize2 = _assertThisInitialize.props,\n          _assertThisInitialize3 = _assertThisInitialize2.step,\n          step = _assertThisInitialize3 === void 0 ? 0.1 : _assertThisInitialize3,\n          _assertThisInitialize4 = _assertThisInitialize2.reversed,\n          reversed = _assertThisInitialize4 === void 0 ? false : _assertThisInitialize4,\n          _assertThisInitialize5 = _assertThisInitialize2.vertical,\n          vertical = _assertThisInitialize5 === void 0 ? false : _assertThisInitialize5,\n          _assertThisInitialize6 = _assertThisInitialize2.domain,\n          domain = _assertThisInitialize6 === void 0 ? [0, 100] : _assertThisInitialize6;\n\n      var key = e.key || \"\".concat(e.keyCode);\n\n      if (!validUpKeys.concat(validDownKeys).includes(key)) {\n        return;\n      }\n\n      if (vertical) {\n        var _ref = [validDownKeys, validUpKeys];\n        validUpKeys = _ref[0];\n        validDownKeys = _ref[1];\n      }\n\n      e.stopPropagation && e.stopPropagation();\n      e.preventDefault && e.preventDefault();\n      var found = handles.find(function (value) {\n        return value.key === handleID;\n      });\n\n      if (!found) {\n        return;\n      }\n\n      var currVal = found.val;\n      var newVal = currVal;\n\n      if (validUpKeys.includes(key)) {\n        newVal = getNextValue(currVal, step, domain, reversed);\n      } else if (validDownKeys.includes(key)) {\n        newVal = getPrevValue(currVal, step, domain, reversed);\n      }\n\n      var nextHandles = handles.map(function (v) {\n        return v.key === handleID ? {\n          key: v.key,\n          val: newVal\n        } : v;\n      });\n\n      _this.submitUpdate(nextHandles, true);\n    };\n\n    _this.onMouseDown = function (e, handleID) {\n      _this.onStart(e, handleID, false);\n    };\n\n    _this.onTouchStart = function (e, handleID) {\n      if (isNotValidTouch(e)) {\n        return;\n      }\n\n      _this.onStart(e, handleID, true);\n    };\n\n    _this.getEventData = function (e, isTouch) {\n      var _assertThisInitialize7 = _assertThisInitialized(_this),\n          _assertThisInitialize8 = _assertThisInitialize7.state,\n          pixelToStep = _assertThisInitialize8.pixelToStep,\n          valueToPerc = _assertThisInitialize8.valueToPerc,\n          vertical = _assertThisInitialize7.props.vertical; // double check the dimensions of the slider\n      // @ts-ignore\n\n\n      pixelToStep.setDomain(getSliderDomain(_this.slider.current, vertical));\n      var value;\n\n      if (isTouch && e instanceof TouchEvent) {\n        // @ts-ignore\n        value = pixelToStep.getValue(getTouchPosition(vertical, e));\n      } else if (e instanceof MouseEvent) {\n        // @ts-ignore\n        value = pixelToStep.getValue(vertical ? e.clientY : e.pageX);\n      }\n\n      return {\n        value: value,\n        // @ts-ignore\n        percent: valueToPerc.getValue(value)\n      };\n    };\n\n    _this.onMouseMove = function (e) {\n      var _assertThisInitialize9 = _assertThisInitialized(_this),\n          _assertThisInitialize10 = _assertThisInitialize9.state,\n          curr = _assertThisInitialize10.handles,\n          pixelToStep = _assertThisInitialize10.pixelToStep,\n          _assertThisInitialize11 = _assertThisInitialize10.activeHandleID,\n          activeHandleID = _assertThisInitialize11 === void 0 ? '' : _assertThisInitialize11,\n          _assertThisInitialize12 = _assertThisInitialize9.props,\n          vertical = _assertThisInitialize12.vertical,\n          _assertThisInitialize13 = _assertThisInitialize12.reversed,\n          reversed = _assertThisInitialize13 === void 0 ? false : _assertThisInitialize13; // double check the dimensions of the slider\n      // @ts-ignore\n\n\n      pixelToStep.setDomain(getSliderDomain(_this.slider.current, vertical)); // find the closest value (aka step) to the event location\n      // @ts-ignore\n\n      var updateValue = pixelToStep.getValue(vertical ? e.clientY : e.pageX); // generate a \"candidate\" set of values - a suggestion of what to do\n\n      var nextHandles = getUpdatedHandles(curr, activeHandleID, updateValue, reversed); // submit the candidate values\n\n      _this.submitUpdate(nextHandles);\n    };\n\n    _this.onTouchMove = function (e) {\n      var _assertThisInitialize14 = _assertThisInitialized(_this),\n          _assertThisInitialize15 = _assertThisInitialize14.state,\n          curr = _assertThisInitialize15.handles,\n          pixelToStep = _assertThisInitialize15.pixelToStep,\n          activeHandleID = _assertThisInitialize15.activeHandleID,\n          _assertThisInitialize16 = _assertThisInitialize14.props,\n          vertical = _assertThisInitialize16.vertical,\n          reversed = _assertThisInitialize16.reversed;\n\n      if (pixelToStep === null || isNotValidTouch(e)) {\n        return;\n      } // double check the dimensions of the slider\n      // @ts-ignore\n\n\n      pixelToStep.setDomain(getSliderDomain(_this.slider.current, vertical)); // find the closest value (aka step) to the event location\n      // @ts-ignore\n\n      var updateValue = pixelToStep.getValue(getTouchPosition(vertical, e)); // generate a \"candidate\" set of values - a suggestion of what to do\n\n      var nextHandles = getUpdatedHandles(curr, activeHandleID, updateValue, reversed); // submit the candidate values\n\n      _this.submitUpdate(nextHandles);\n    };\n\n    _this.onMouseUp = function () {\n      var _assertThisInitialize17 = _assertThisInitialized(_this),\n          _assertThisInitialize18 = _assertThisInitialize17.state,\n          _assertThisInitialize19 = _assertThisInitialize18.handles,\n          handles = _assertThisInitialize19 === void 0 ? [] : _assertThisInitialize19,\n          activeHandleID = _assertThisInitialize18.activeHandleID,\n          _assertThisInitialize20 = _assertThisInitialize17.props,\n          _assertThisInitialize21 = _assertThisInitialize20.onChange,\n          onChange = _assertThisInitialize21 === void 0 ? noop : _assertThisInitialize21,\n          _assertThisInitialize22 = _assertThisInitialize20.onSlideEnd,\n          onSlideEnd = _assertThisInitialize22 === void 0 ? noop : _assertThisInitialize22;\n\n      onChange(handles.map(function (d) {\n        return d.val;\n      }));\n      onSlideEnd(handles.map(function (d) {\n        return d.val;\n      }), {\n        activeHandleID: activeHandleID\n      });\n\n      _this.setState({\n        activeHandleID: ''\n      });\n\n      if (isBrowser) {\n        document.removeEventListener('mousemove', _this.onMouseMove);\n        document.removeEventListener('mouseup', _this.onMouseUp);\n      }\n    };\n\n    _this.onTouchEnd = function () {\n      var _assertThisInitialize23 = _assertThisInitialized(_this),\n          _assertThisInitialize24 = _assertThisInitialize23.state,\n          handles = _assertThisInitialize24.handles,\n          activeHandleID = _assertThisInitialize24.activeHandleID,\n          _assertThisInitialize25 = _assertThisInitialize23.props,\n          _assertThisInitialize26 = _assertThisInitialize25.onChange,\n          onChange = _assertThisInitialize26 === void 0 ? noop : _assertThisInitialize26,\n          _assertThisInitialize27 = _assertThisInitialize25.onSlideEnd,\n          onSlideEnd = _assertThisInitialize27 === void 0 ? noop : _assertThisInitialize27;\n\n      onChange(handles.map(function (d) {\n        return d.val;\n      }));\n      onSlideEnd(handles.map(function (d) {\n        return d.val;\n      }), {\n        activeHandleID: activeHandleID\n      });\n\n      _this.setState({\n        activeHandleID: ''\n      });\n\n      if (isBrowser) {\n        document.removeEventListener('touchmove', _this.onTouchMove);\n        document.removeEventListener('touchend', _this.onTouchEnd);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Slider, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var pixelToStep = this.state.pixelToStep;\n      var vertical = this.props.vertical; // @ts-ignore\n\n      pixelToStep.setDomain(getSliderDomain(this.slider.current, vertical));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.removeListeners();\n    }\n  }, {\n    key: \"removeListeners\",\n    value: function removeListeners() {\n      if (isBrowser) {\n        document.removeEventListener('mousemove', this.onMouseMove);\n        document.removeEventListener('mouseup', this.onMouseUp);\n        document.removeEventListener('touchmove', this.onTouchMove);\n        document.removeEventListener('touchend', this.onTouchEnd);\n      }\n    }\n  }, {\n    key: \"onStart\",\n    value: function onStart(e, handleID, isTouch) {\n      var handles = this.state.handles,\n          _this$props$onSlideSt = this.props.onSlideStart,\n          onSlideStart = _this$props$onSlideSt === void 0 ? noop : _this$props$onSlideSt;\n\n      if (!isTouch) {\n        e.preventDefault && e.preventDefault();\n      }\n\n      e.stopPropagation && e.stopPropagation();\n      var found = handles.find(function (value) {\n        return value.key === handleID;\n      });\n\n      if (found) {\n        this.setState({\n          activeHandleID: handleID\n        });\n        onSlideStart(handles.map(function (d) {\n          return d.val;\n        }), {\n          activeHandleID: handleID\n        });\n        isTouch ? this.addTouchEvents() : this.addMouseEvents();\n      } else {\n        this.setState({\n          activeHandleID: ''\n        });\n        this.handleRailAndTrackClicks(e, isTouch);\n      }\n    }\n  }, {\n    key: \"handleRailAndTrackClicks\",\n    value: function handleRailAndTrackClicks(e, isTouch) {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          curr = _this$state.handles,\n          pixelToStep = _this$state.pixelToStep,\n          _this$props = this.props,\n          vertical = _this$props.vertical,\n          _this$props$reversed = _this$props.reversed,\n          reversed = _this$props$reversed === void 0 ? false : _this$props$reversed;\n      var slider = this.slider; // double check the dimensions of the slider\n      // @ts-ignore\n\n      pixelToStep.setDomain(getSliderDomain(slider.current, vertical)); // find the closest value (aka step) to the event location\n\n      var updateValue;\n\n      if (isTouch) {\n        // @ts-ignore\n        updateValue = pixelToStep.getValue(getTouchPosition(vertical, e));\n      } else {\n        // @ts-ignore\n        updateValue = pixelToStep.getValue(vertical ? e.clientY : e.pageX);\n      } // find the closest handle key\n\n\n      var updateKey = '';\n      var minDiff = Infinity;\n\n      for (var i = 0; i < curr.length; i++) {\n        var _curr$i = curr[i],\n            key = _curr$i.key,\n            val = _curr$i.val;\n        var diff = Math.abs(val - updateValue);\n\n        if (diff < minDiff) {\n          updateKey = key;\n          minDiff = diff;\n        }\n      } // generate a \"candidate\" set of values - a suggestion of what to do\n\n\n      var nextHandles = getUpdatedHandles(curr, updateKey, updateValue, reversed); // submit the candidate values\n\n      this.setState({\n        activeHandleID: updateKey\n      }, function () {\n        _this2.submitUpdate(nextHandles, true);\n\n        isTouch ? _this2.addTouchEvents() : _this2.addMouseEvents();\n      });\n    }\n  }, {\n    key: \"addMouseEvents\",\n    value: function addMouseEvents() {\n      if (isBrowser) {\n        document.addEventListener('mousemove', this.onMouseMove);\n        document.addEventListener('mouseup', this.onMouseUp);\n      }\n    }\n  }, {\n    key: \"addTouchEvents\",\n    value: function addTouchEvents() {\n      if (isBrowser) {\n        document.addEventListener('touchmove', this.onTouchMove);\n        document.addEventListener('touchend', this.onTouchEnd);\n      }\n    }\n  }, {\n    key: \"submitUpdate\",\n    value: function submitUpdate(next) {\n      var callOnChange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var _this$props2 = this.props,\n          _this$props2$mode = _this$props2.mode,\n          mode = _this$props2$mode === void 0 ? 1 : _this$props2$mode,\n          _this$props2$step = _this$props2.step,\n          step = _this$props2$step === void 0 ? 0.1 : _this$props2$step,\n          _this$props2$onUpdate = _this$props2.onUpdate,\n          onUpdate = _this$props2$onUpdate === void 0 ? noop : _this$props2$onUpdate,\n          _this$props2$onChange = _this$props2.onChange,\n          onChange = _this$props2$onChange === void 0 ? noop : _this$props2$onChange,\n          _this$props2$reversed = _this$props2.reversed,\n          reversed = _this$props2$reversed === void 0 ? false : _this$props2$reversed; //@ts-ignore\n\n      var getValue = this.state.valueToStep.getValue;\n      this.setState(function (_ref2) {\n        var curr = _ref2.handles;\n        var handles = []; // given the current handles and a candidate set, decide what to do\n\n        if (typeof mode === 'function') {\n          handles = mode(curr, next, step, reversed, getValue);\n          warning(Array.isArray(handles), 'Custom mode function did not return an array.');\n        } else {\n          switch (mode) {\n            case 1:\n              handles = mode1(curr, next);\n              break;\n\n            case 2:\n              handles = mode2(curr, next);\n              break;\n\n            case 3:\n              handles = mode3(curr, next, step, reversed, getValue);\n              break;\n\n            default:\n              handles = next;\n              warning(false, \"\".concat(prfx, \" Invalid mode value.\"));\n          }\n        }\n\n        onUpdate(handles.map(function (d) {\n          return d.val;\n        }));\n\n        if (callOnChange) {\n          onChange(handles.map(function (d) {\n            return d.val;\n          }));\n        }\n\n        return {\n          handles: handles\n        };\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          handles = _this$state2.handles,\n          valueToPerc = _this$state2.valueToPerc,\n          activeHandleID = _this$state2.activeHandleID,\n          _this$props3 = this.props,\n          className = _this$props3.className,\n          _this$props3$rootStyl = _this$props3.rootStyle,\n          rootStyle = _this$props3$rootStyl === void 0 ? {} : _this$props3$rootStyl,\n          _this$props3$rootProp = _this$props3.rootProps,\n          rootProps = _this$props3$rootProp === void 0 ? {} : _this$props3$rootProp,\n          _this$props3$componen = _this$props3.component,\n          Comp = _this$props3$componen === void 0 ? 'div' : _this$props3$componen,\n          _this$props3$disabled = _this$props3.disabled,\n          disabled = _this$props3$disabled === void 0 ? false : _this$props3$disabled,\n          _this$props3$flatten = _this$props3.flatten,\n          flatten = _this$props3$flatten === void 0 ? false : _this$props3$flatten;\n      var mappedHandles = handles.map(function (_ref3) {\n        var key = _ref3.key,\n            val = _ref3.val; // @ts-ignore\n\n        return {\n          id: key,\n          value: val,\n          percent: valueToPerc.getValue(val)\n        };\n      });\n      var children = React.Children.map(this.props.children, function (child) {\n        if (isRCSComponent(child) === true) {\n          return /*#__PURE__*/React.cloneElement(child, {\n            scale: valueToPerc,\n            handles: mappedHandles,\n            activeHandleID: activeHandleID,\n            getEventData: _this3.getEventData,\n            emitKeyboard: disabled ? noop : _this3.onKeyDown,\n            emitMouse: disabled ? noop : _this3.onMouseDown,\n            emitTouch: disabled ? noop : _this3.onTouchStart\n          });\n        } else {\n          return child;\n        }\n      });\n      return flatten ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Comp, _objectSpread2(_objectSpread2({}, rootProps), {}, {\n        style: rootStyle,\n        className: className,\n        ref: this.slider\n      })), children) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Comp, _objectSpread2(_objectSpread2({}, rootProps), {}, {\n        style: rootStyle,\n        className: className,\n        ref: this.slider\n      }), children));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var _nextProps$step = nextProps.step,\n          step = _nextProps$step === void 0 ? 0.1 : _nextProps$step,\n          values = nextProps.values,\n          _nextProps$domain = nextProps.domain,\n          domain = _nextProps$domain === void 0 ? defaultDomain : _nextProps$domain,\n          _nextProps$reversed = nextProps.reversed,\n          reversed = _nextProps$reversed === void 0 ? false : _nextProps$reversed,\n          _nextProps$onUpdate = nextProps.onUpdate,\n          onUpdate = _nextProps$onUpdate === void 0 ? noop : _nextProps$onUpdate,\n          _nextProps$onChange = nextProps.onChange,\n          onChange = _nextProps$onChange === void 0 ? noop : _nextProps$onChange,\n          _nextProps$warnOnChan = nextProps.warnOnChanges,\n          warnOnChanges = _nextProps$warnOnChan === void 0 ? false : _nextProps$warnOnChan;\n      var valueToPerc = prevState.valueToPerc;\n      var valueToStep = prevState.valueToStep;\n      var pixelToStep = prevState.pixelToStep;\n      var nextState = {};\n\n      if (!valueToPerc || !valueToStep || !pixelToStep) {\n        valueToPerc = new LinearScale();\n        valueToStep = new DiscreteScale();\n        pixelToStep = new DiscreteScale();\n        nextState.valueToPerc = valueToPerc;\n        nextState.valueToStep = valueToStep;\n        nextState.pixelToStep = pixelToStep;\n      }\n\n      if (prevState.domain === defaultDomain || prevState.step === null || prevState.domain === null || prevState.reversed === null || step !== prevState.step || domain[0] !== prevState.domain[0] || domain[1] !== prevState.domain[1] || reversed !== prevState.reversed) {\n        var _domain = _slicedToArray(domain, 2),\n            min = _domain[0],\n            max = _domain[1];\n\n        valueToStep.setStep(step).setRange([min, max]).setDomain([min, max]);\n\n        if (reversed === true) {\n          valueToPerc.setDomain([min, max]).setRange([100, 0]);\n          pixelToStep.setStep(step).setRange([max, min]);\n        } else {\n          valueToPerc.setDomain([min, max]).setRange([0, 100]);\n          pixelToStep.setStep(step).setRange([min, max]);\n        }\n\n        warning(max > min, \"\".concat(prfx, \" Max must be greater than min (even if reversed). Max is \").concat(max, \". Min is \").concat(min, \".\"));\n\n        var _getHandles = getHandles(values || prevState.values, reversed, valueToStep, warnOnChanges),\n            handles = _getHandles.handles,\n            changes = _getHandles.changes;\n\n        if (changes || values === undefined || values === prevState.values) {\n          onUpdate(handles.map(function (d) {\n            return d.val;\n          }));\n          onChange(handles.map(function (d) {\n            return d.val;\n          }));\n        }\n\n        nextState.step = step;\n        nextState.values = values;\n        nextState.domain = domain === defaultDomain ? _toConsumableArray(domain) : domain;\n        nextState.handles = handles;\n        nextState.reversed = reversed;\n      } else if (!equal(values, prevState.values)) {\n        var _getHandles2 = getHandles(values, reversed, valueToStep, warnOnChanges),\n            _handles = _getHandles2.handles,\n            _changes = _getHandles2.changes;\n\n        if (_changes) {\n          onUpdate(_handles.map(function (d) {\n            return d.val;\n          }));\n          onChange(_handles.map(function (d) {\n            return d.val;\n          }));\n        }\n\n        nextState.values = values;\n        nextState.handles = _handles;\n      }\n\n      if (Object.keys(nextState).length) {\n        return nextState;\n      }\n\n      return null;\n    }\n  }]);\n\n  return Slider;\n}(PureComponent);\n\nexport { Handles, Rail, Slider, Ticks, Tracks, mode1, mode2, mode3 };","map":{"version":3,"mappings":"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","names":["prfx","getSortByVal","reversed","sortByVal","a","b","val","getUpdatedHandles","handles","updateKey","updateValue","index","findIndex","v","key","slice","sort","getSliderDomain","slider","vertical","s","getBoundingClientRect","d0","top","left","d1","bottom","right","isNotValidTouch","_ref","type","touches","length","toLowerCase","getTouchPosition","e","clientY","pageX","getHandles","values","valueToStep","warn","changes","map","getValue","x","warning","i","mode1","_","next","mode2","curr","mode3","step","indexForMovingHandle","handleMoveIsPositive","c","n","increment","n0","n1","newStep","clone","check","callAll","fns","arguments","forEach","fn","NOOP","value","percent","Rail","_inherits","_classCallCheck","args","_this","getRailProps","props","emitMouse","emitTouch","onMouseDown","onTouchStart","_createClass","render","_this$props2","getEventData","activeHandleID","children","renderedChildren","React","Children","only","Component","Handles","autofocus","target","HTMLElement","focus","getHandleProps","id","emitKeyboard","onKeyDown","LinearScale","interpolator","domain","range","r0","r1","interpolateValue","deinterpolateValue","t","rescale","createInterpolator","getDomain","getRange","count","d","ticks","defaultGetEventData","Ticks","scale","getTicks","Tracks","getTrackProps","tracks","source","push","clamp","min","max","Math","DiscreteScale","setDomain","setRange","setStep","_this$domain","_this$range","p","round","isBrowser","window","document","noop","compare","m","equal","reduce","isRCSComponent","item","isValidElement","name","getNextValue","newVal","getPrevValue","defaultDomain","Slider","state","valueToPerc","pixelToStep","createRef","handleID","validUpKeys","validDownKeys","_assertThisInitialize6","keyCode","concat","includes","stopPropagation","preventDefault","found","find","currVal","nextHandles","submitUpdate","onStart","isTouch","current","TouchEvent","MouseEvent","onMouseMove","onTouchMove","onMouseUp","onChange","onSlideEnd","setState","removeEventListener","onTouchEnd","componentDidMount","componentWillUnmount","removeListeners","onSlideStart","addTouchEvents","addMouseEvents","handleRailAndTrackClicks","_this$state","_this$props","minDiff","Infinity","diff","abs","_this2","addEventListener","callOnChange","mode","onUpdate","_ref2","Array","isArray","_this$state2","_this$props3","className","rootStyle","rootProps","component","Comp","disabled","flatten","mappedHandles","_ref3","child","cloneElement","_this3","createElement","style","ref","nextProps","prevState","warnOnChanges","nextState","undefined","Object","keys","PureComponent"],"sources":["/home/dedm/Documents/sript/lab3-script/node_modules/react-compound-slider/src/Slider/utils.ts","/home/dedm/Documents/sript/lab3-script/node_modules/react-compound-slider/src/Slider/modes.ts","/home/dedm/Documents/sript/lab3-script/node_modules/react-compound-slider/src/utils.ts","/home/dedm/Documents/sript/lab3-script/node_modules/react-compound-slider/src/Rail/Rail.tsx","/home/dedm/Documents/sript/lab3-script/node_modules/react-compound-slider/src/Handles/Handles.tsx","/home/dedm/Documents/sript/lab3-script/node_modules/react-compound-slider/src/scales/LinearScale.ts","/home/dedm/Documents/sript/lab3-script/node_modules/react-compound-slider/src/Ticks/Ticks.tsx","/home/dedm/Documents/sript/lab3-script/node_modules/react-compound-slider/src/Tracks/Tracks.tsx","/home/dedm/Documents/sript/lab3-script/node_modules/react-compound-slider/src/scales/DiscreteScale.ts","/home/dedm/Documents/sript/lab3-script/node_modules/react-compound-slider/src/Slider/Slider.tsx"],"sourcesContent":["import React from 'react';\nimport warning from 'warning';\n\nimport { DiscreteScale } from '../scales/DiscreteScale';\nimport { HandleItem } from '../types';\n\nexport const prfx = 'react-compound-slider:';\n\nexport function getSortByVal(reversed: boolean = false) {\n  return function sortByVal(a: HandleItem, b: HandleItem) {\n    if (a.val > b.val) {\n      return reversed ? -1 : 1;\n    }\n\n    if (b.val > a.val) {\n      return reversed ? 1 : -1;\n    }\n\n    return 0;\n  };\n}\n\nexport function getUpdatedHandles(\n  handles: HandleItem[],\n  updateKey: string,\n  updateValue: number,\n  reversed: boolean = false\n) {\n  const index = handles.findIndex(v => v.key === updateKey);\n\n  if (index !== -1) {\n    const { key, val } = handles[index];\n\n    if (val === updateValue) {\n      return handles;\n    }\n\n    return [\n      ...handles.slice(0, index),\n      { key, val: updateValue },\n      ...handles.slice(index + 1),\n    ].sort(getSortByVal(reversed));\n  }\n\n  return handles;\n}\n\nexport function getSliderDomain(slider: Element | null, vertical: boolean) {\n  if (!slider) {\n    return [0, 0];\n  }\n\n  const s = slider.getBoundingClientRect();\n\n  const d0 = vertical ? s.top : s.left;\n  const d1 = vertical ? s.bottom : s.right;\n\n  return [d0, d1];\n}\n\nexport function isNotValidTouch({\n  type = '',\n  touches,\n}: {\n  type: string;\n  touches: TouchEvent['touches'];\n}) {\n  return (\n    !touches ||\n    touches.length > 1 ||\n    (type.toLowerCase() === 'touchend' && touches.length > 0)\n  );\n}\n\nexport function getTouchPosition(\n  vertical: boolean,\n  e: React.TouchEvent | TouchEvent\n) {\n  return vertical ? e.touches[0].clientY : e.touches[0].pageX;\n}\n\nexport function getHandles(\n  values: ReadonlyArray<number> = [],\n  reversed: boolean,\n  valueToStep: DiscreteScale,\n  warn: boolean\n) {\n  let changes = 0;\n\n  const handles = values\n    .map(x => {\n      const val = valueToStep.getValue(x);\n\n      if (x !== val) {\n        changes += 1;\n        warning(\n          !warn,\n          `${prfx} Invalid value encountered. Changing ${x} to ${val}.`\n        );\n      }\n\n      return val;\n    })\n    .map((val, i) => ({ key: `$$-${i}`, val }))\n    .sort(getSortByVal(reversed));\n\n  return { handles, changes };\n}\n","import { getUpdatedHandles } from './utils';\nimport { HandleItem } from '../types';\n\n// default mode\nexport function mode1(_: HandleItem[], next: HandleItem[]) {\n  return next;\n}\n\n// prevent duplicate values and crossing\nexport function mode2(curr: HandleItem[], next: HandleItem[]) {\n  for (let i = 0; i < curr.length; i++) {\n    if (curr[i].key !== next[i].key) {\n      return curr;\n    }\n\n    if (next[i + 1] && next[i].val === next[i + 1].val) {\n      return curr;\n    }\n  }\n\n  return next;\n}\n\n// pushable mode\nexport function mode3(\n  curr: HandleItem[],\n  next: HandleItem[],\n  step: number,\n  reversed: boolean,\n  getValue: (x: number) => number\n): HandleItem[] {\n  let indexForMovingHandle = -1;\n  let handleMoveIsPositive = true;\n\n  for (let i = 0; i < curr.length; i++) {\n    const c = curr[i];\n    const n = next[i];\n\n    // make sure keys are in same order if not return curr\n    if (!n || n.key !== c.key) {\n      return curr;\n    } else if (n.val !== c.val) {\n      indexForMovingHandle = i;\n      handleMoveIsPositive = n.val - c.val > 0;\n    }\n  }\n\n  // nothing has changed (shouldn't happen but just in case).\n  if (indexForMovingHandle === -1) {\n    return curr;\n  } else {\n    const increment = handleMoveIsPositive ? step : -step;\n\n    for (let i = 0; i < next.length; i++) {\n      const n0 = next[i];\n      const n1 = next[i + 1];\n\n      if (n1 && n0.val === n1.val) {\n        if (i === indexForMovingHandle) {\n          const newStep = n1.val + increment;\n          if (getValue(newStep) === newStep) {\n            const clone = getUpdatedHandles(\n              next,\n              n1.key,\n              n1.val + increment,\n              reversed\n            );\n            const check = mode3(next, clone, step, reversed, getValue);\n\n            if (check === next) {\n              return curr;\n            } else {\n              return check;\n            }\n          } else {\n            return curr;\n          }\n        } else {\n          const newStep = n0.val + increment;\n          if (getValue(newStep) === newStep) {\n            const clone = getUpdatedHandles(\n              next,\n              n0.key,\n              n0.val + increment,\n              reversed\n            );\n            const check = mode3(next, clone, step, reversed, getValue);\n\n            if (check === next) {\n              return curr;\n            } else {\n              return check;\n            }\n          } else {\n            return curr;\n          }\n        }\n      }\n    }\n  }\n\n  return next;\n}\n","export function callAll<T>(...fns: (((e: T) => void) | undefined)[]) {\n  return (e: T) => {\n    return fns.forEach(fn => fn && fn(e));\n  };\n}\n","import React, { Component } from 'react';\nimport { callAll } from '../utils';\n\nimport { OtherProps } from '../types';\nimport { RailProps } from './types';\n\nconst NOOP = () => ({ value: 0, percent: 0 });\n\nexport class Rail extends Component<RailProps> {\n  getRailProps = (props: OtherProps = {}) => {\n    const { emitMouse, emitTouch } = this.props;\n\n    return {\n      ...props,\n      onMouseDown: callAll<React.MouseEvent<Element>>(\n        props && props.onMouseDown,\n        emitMouse\n      ),\n      onTouchStart: callAll(props && props.onTouchStart, emitTouch),\n    };\n  };\n\n  render() {\n    const {\n      getRailProps,\n      props: { getEventData, activeHandleID = '', children },\n    } = this;\n\n    const renderedChildren = children({\n      getEventData: getEventData || NOOP,\n      activeHandleID,\n      getRailProps,\n    });\n    return renderedChildren && React.Children.only(renderedChildren);\n  }\n}\n","import React, { Component } from 'react';\nimport { callAll } from '../utils';\n\nimport { OtherProps } from '../types';\nimport { HandlesProps } from './types';\n\nexport class Handles extends Component<HandlesProps> {\n  autofocus = (e: React.MouseEvent<Element>) => {\n    if (e.target instanceof HTMLElement) {\n      e.target.focus();\n    }\n  };\n\n  getHandleProps = (id: string, props: OtherProps = {}) => {\n    const { emitKeyboard, emitMouse, emitTouch } = this.props;\n\n    return {\n      ...props,\n      onKeyDown: callAll<React.KeyboardEvent<Element>>(\n        props && props.onKeyDown,\n        (e: React.KeyboardEvent<Element>) => emitKeyboard && emitKeyboard(e, id)\n      ),\n      onMouseDown: callAll<React.MouseEvent<Element>>(\n        props && props.onMouseDown,\n        this.autofocus,\n        (e: React.MouseEvent) => emitMouse && emitMouse(e, id)\n      ),\n      onTouchStart: callAll<React.TouchEvent<Element>>(\n        props && props.onTouchStart,\n        (e: React.TouchEvent<Element>) => emitTouch && emitTouch(e, id)\n      ),\n    };\n  };\n\n  render() {\n    const {\n      getHandleProps,\n      props: { activeHandleID = '', children, handles = [] },\n    } = this;\n\n    const renderedChildren = children({\n      handles,\n      activeHandleID,\n      getHandleProps,\n    });\n\n    return renderedChildren && React.Children.only(renderedChildren);\n  }\n}\n","import { ticks } from 'd3-array';\n\nimport { Interpolator } from '../types';\n\nexport class LinearScale {\n  interpolator: Interpolator | null;\n  domain: number[] = [0, 1];\n  range: number[] = [0, 1];\n\n  constructor() {\n    this.domain = [0, 1];\n    this.range = [0, 1];\n    this.interpolator = null;\n  }\n\n  createInterpolator(domain: number[], range: number[]) {\n    const d0 = domain[0];\n    const d1 = domain[1];\n\n    const r0 = range[0];\n    const r1 = range[1];\n\n    if (d1 < d0) {\n      return (x: number) =>\n        this.interpolateValue(r1, r0)(this.deinterpolateValue(d1, d0)(x));\n    } else {\n      return (x: number) =>\n        this.interpolateValue(r0, r1)(this.deinterpolateValue(d0, d1)(x));\n    }\n  }\n\n  interpolateValue(a: number, b: number) {\n    return (\n      (a = +a),\n      (b -= a),\n      function i(t: number) {\n        return a + b * t;\n      }\n    );\n  }\n\n  deinterpolateValue(a: number, b: number) {\n    return (b -= a = +a) ? (x: number) => (x - a) / b : () => b;\n  }\n\n  rescale() {\n    this.interpolator = null;\n\n    return this;\n  }\n\n  getValue(x: number) {\n    const { domain, range } = this;\n\n    return (\n      this.interpolator ||\n      (this.interpolator = this.createInterpolator(domain, range))\n    )(+x);\n  }\n\n  setDomain(val: number[]) {\n    this.domain = [val[0], val[1]];\n\n    this.rescale();\n\n    return this;\n  }\n\n  getDomain() {\n    return this.domain;\n  }\n\n  setRange(val: number[]) {\n    this.range = [val[0], val[1]];\n\n    return this;\n  }\n\n  getRange() {\n    return this.range;\n  }\n\n  getTicks(count: number) {\n    const d = this.domain;\n    return ticks(d[0], d[d.length - 1], count ? count : 10);\n  }\n}\n","import React, { Component } from 'react';\n\nimport { TicksProps } from './types';\nimport { LinearScale } from '../scales/LinearScale';\n\nconst defaultGetEventData = () => ({ value: 0, percent: 0 });\n\nexport class Ticks extends Component<TicksProps> {\n  public render() {\n    const {\n      children,\n      values,\n      scale = new LinearScale(),\n      count = 10,\n      getEventData = defaultGetEventData,\n      activeHandleID = '',\n    } = this.props;\n\n    const ticks = (values ? values : scale.getTicks(count)).map((value) => ({\n      id: `$$-${value}`,\n      value,\n      percent: scale.getValue(value),\n    }));\n\n    const renderedChildren = children({ getEventData, activeHandleID, ticks });\n    return renderedChildren && React.Children.only(renderedChildren);\n  }\n}\n","import React, { Component } from 'react';\n\nimport { callAll } from '../utils';\nimport { LinearScale } from '../scales/LinearScale';\nimport { TracksProps } from './types';\nimport { OtherProps } from '../types';\n\nconst defaultGetEventData = () => ({ value: 0, percent: 0 });\n\nexport class Tracks extends Component<TracksProps> {\n  getTrackProps = (props?: OtherProps) => {\n    const { emitMouse, emitTouch } = this.props;\n\n    return {\n      ...(props || {}),\n      onMouseDown: callAll<React.MouseEvent<Element>>(\n        props && props.onMouseDown,\n        emitMouse\n      ),\n      onTouchStart: callAll<React.TouchEvent<Element>>(\n        props && props.onTouchStart,\n        emitTouch\n      ),\n    };\n  };\n\n  render() {\n    const {\n      getTrackProps,\n      props: {\n        children,\n        left = true,\n        right = true,\n        scale = new LinearScale(),\n        handles = [],\n        getEventData = defaultGetEventData,\n        activeHandleID = '',\n      },\n    } = this;\n\n    const domain = scale.getDomain();\n    const tracks = [];\n\n    for (let i = 0; i < handles.length + 1; i++) {\n      let source = handles[i - 1];\n      let target = handles[i];\n\n      if (i === 0 && left === true) {\n        source = { id: '$', value: domain[0], percent: 0 };\n      } else if (i === handles.length && right === true) {\n        target = { id: '$', value: domain[1], percent: 100 };\n      }\n\n      if (source && target) {\n        tracks.push({\n          id: `${source.id}-${target.id}`,\n          source,\n          target,\n        });\n      }\n    }\n\n    const renderedChildren = children({\n      getEventData,\n      activeHandleID,\n      tracks,\n      getTrackProps,\n    });\n\n    return renderedChildren && React.Children.only(renderedChildren);\n  }\n}\n","function clamp(value: number, min: number, max: number) {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport class DiscreteScale {\n  step: number = 1;\n  domain: number[] = [0, 1];\n  range: number[] = [0, 1];\n\n  setDomain = (val: number[]) => {\n    this.domain = [val[0], val[1]];\n\n    return this;\n  };\n\n  setRange = (val: number[]) => {\n    this.range = [val[0], val[1]];\n\n    return this;\n  };\n\n  setStep = (val: number) => {\n    this.step = val;\n\n    return this;\n  };\n\n  getValue = (x: number) => {\n    const {\n      domain: [d0, d1],\n      range: [r0, r1],\n      step,\n    } = this;\n\n    const p = (clamp(x, d0, d1) - d0) / (d1 - d0);\n    const b = step * Math.round((p * (r1 - r0)) / step) + r0;\n\n    return clamp(b, r0 < r1 ? r0 : r1, r1 > r0 ? r1 : r0);\n  };\n}\n","import React, { PureComponent, isValidElement } from 'react';\nimport warning from 'warning';\nimport { mode1, mode2, mode3 } from './modes';\nimport {\n  isNotValidTouch,\n  getTouchPosition,\n  getUpdatedHandles,\n  getSliderDomain,\n  getHandles,\n  prfx,\n} from './utils';\nimport { Rail } from '../Rail';\nimport { Handles } from '../Handles';\nimport { Ticks } from '../Ticks';\nimport { Tracks } from '../Tracks';\nimport { LinearScale } from '../scales/LinearScale';\nimport { DiscreteScale } from '../scales/DiscreteScale';\n\nimport { SliderProps, SliderState } from './types';\nimport { HandleItem } from '../types';\n\nconst isBrowser =\n  typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst noop = () => {};\n\nconst compare = (b: any[]) => (m: any, d: any, i: number) => m && b[i] === d;\n\nconst equal = (a: any, b: any) => {\n  return a === b || (a.length === b.length && a.reduce(compare(b), true));\n};\n\ninterface RCSComponent {\n  type: {\n    name: 'Rail' | 'Handles' | 'Ticks' | 'Tracks';\n  };\n}\n\nconst isRCSComponent = (item: React.ReactNode) => {\n  if (!isValidElement(item)) {\n    return false;\n  }\n\n  const type = (item as RCSComponent).type;\n  const name = type ? type.name : '';\n\n  return (\n    name === Handles.name ||\n    name === Rail.name ||\n    name === Ticks.name ||\n    name === Tracks.name\n  );\n};\n\nconst getNextValue = (\n  curr: number,\n  step: number,\n  domain: ReadonlyArray<number>,\n  reversed: boolean\n) => {\n  const newVal = reversed ? curr - step : curr + step;\n  return reversed ? Math.max(domain[0], newVal) : Math.min(domain[1], newVal);\n};\n\nconst getPrevValue = (\n  curr: number,\n  step: number,\n  domain: ReadonlyArray<number>,\n  reversed: boolean\n) => {\n  const newVal = reversed ? curr + step : curr - step;\n  return reversed ? Math.min(domain[1], newVal) : Math.max(domain[0], newVal);\n};\n\nconst defaultDomain = [0, 100];\n\nexport class Slider<\n  T extends HTMLDivElement = HTMLDivElement\n> extends PureComponent<SliderProps, SliderState> {\n  state = {\n    step: 0.1,\n    values: [],\n    domain: defaultDomain,\n    handles: [] as HandleItem[],\n    reversed: false,\n    activeHandleID: '',\n    valueToPerc: null,\n    valueToStep: null,\n    pixelToStep: null,\n  };\n\n  slider = React.createRef<T>();\n\n  static getDerivedStateFromProps(\n    nextProps: SliderProps,\n    prevState: SliderState\n  ) {\n    const {\n      step = 0.1,\n      values,\n      domain = defaultDomain,\n      reversed = false,\n      onUpdate = noop,\n      onChange = noop,\n      warnOnChanges = false,\n    } = nextProps;\n    let valueToPerc = prevState.valueToPerc;\n    let valueToStep = prevState.valueToStep;\n    let pixelToStep = prevState.pixelToStep;\n\n    const nextState: Partial<SliderState> = {};\n\n    if (!valueToPerc || !valueToStep || !pixelToStep) {\n      valueToPerc = new LinearScale();\n      valueToStep = new DiscreteScale();\n      pixelToStep = new DiscreteScale();\n\n      nextState.valueToPerc = valueToPerc;\n      nextState.valueToStep = valueToStep;\n      nextState.pixelToStep = pixelToStep;\n    }\n\n    if (\n      prevState.domain === defaultDomain ||\n      prevState.step === null ||\n      prevState.domain === null ||\n      prevState.reversed === null ||\n      step !== prevState.step ||\n      domain[0] !== prevState.domain[0] ||\n      domain[1] !== prevState.domain[1] ||\n      reversed !== prevState.reversed\n    ) {\n      const [min, max] = domain;\n      valueToStep.setStep(step).setRange([min, max]).setDomain([min, max]);\n\n      if (reversed === true) {\n        valueToPerc.setDomain([min, max]).setRange([100, 0]);\n        pixelToStep.setStep(step).setRange([max, min]);\n      } else {\n        valueToPerc.setDomain([min, max]).setRange([0, 100]);\n        pixelToStep.setStep(step).setRange([min, max]);\n      }\n\n      warning(\n        max > min,\n        `${prfx} Max must be greater than min (even if reversed). Max is ${max}. Min is ${min}.`\n      );\n\n      const { handles, changes } = getHandles(\n        values || prevState.values,\n        reversed,\n        valueToStep,\n        warnOnChanges\n      );\n\n      if (changes || values === undefined || values === prevState.values) {\n        onUpdate(handles.map((d) => d.val));\n        onChange(handles.map((d) => d.val));\n      }\n\n      nextState.step = step;\n      nextState.values = values;\n      nextState.domain = domain === defaultDomain ? [...domain] : domain;\n      nextState.handles = handles;\n      nextState.reversed = reversed;\n    } else if (!equal(values, prevState.values)) {\n      const { handles, changes } = getHandles(\n        values,\n        reversed,\n        valueToStep,\n        warnOnChanges\n      );\n\n      if (changes) {\n        onUpdate(handles.map((d) => d.val));\n        onChange(handles.map((d) => d.val));\n      }\n\n      nextState.values = values;\n      nextState.handles = handles;\n    }\n\n    if (Object.keys(nextState).length) {\n      return nextState;\n    }\n\n    return null;\n  }\n\n  componentDidMount() {\n    const { pixelToStep } = this.state;\n    const { vertical } = this.props;\n\n    // @ts-ignore\n    pixelToStep.setDomain(getSliderDomain(this.slider.current, vertical));\n  }\n\n  componentWillUnmount() {\n    this.removeListeners();\n  }\n\n  removeListeners() {\n    if (isBrowser) {\n      document.removeEventListener('mousemove', this.onMouseMove);\n      document.removeEventListener('mouseup', this.onMouseUp);\n      document.removeEventListener('touchmove', this.onTouchMove);\n      document.removeEventListener('touchend', this.onTouchEnd);\n    }\n  }\n\n  onKeyDown = (e: KeyboardEvent, handleID: string) => {\n    let validUpKeys = ['ArrowRight', 'ArrowUp'];\n    let validDownKeys = ['ArrowDown', 'ArrowLeft'];\n\n    const {\n      state: { handles },\n      props: {\n        step = 0.1,\n        reversed = false,\n        vertical = false,\n        domain = [0, 100] as number[],\n      },\n    } = this;\n    const key = e.key || `${e.keyCode}`;\n\n    if (!validUpKeys.concat(validDownKeys).includes(key)) {\n      return;\n    }\n\n    if (vertical) {\n      [validUpKeys, validDownKeys] = [validDownKeys, validUpKeys];\n    }\n\n    e.stopPropagation && e.stopPropagation();\n    e.preventDefault && e.preventDefault();\n\n    const found = handles.find((value) => {\n      return value.key === handleID;\n    });\n\n    if (!found) {\n      return;\n    }\n\n    const currVal = found.val;\n    let newVal = currVal;\n\n    if (validUpKeys.includes(key)) {\n      newVal = getNextValue(currVal, step, domain, reversed);\n    } else if (validDownKeys.includes(key)) {\n      newVal = getPrevValue(currVal, step, domain, reversed);\n    }\n    const nextHandles = handles.map((v) =>\n      v.key === handleID ? { key: v.key, val: newVal } : v\n    );\n\n    this.submitUpdate(nextHandles, true);\n  };\n\n  onMouseDown = (e: MouseEvent, handleID: string) => {\n    this.onStart(e, handleID, false);\n  };\n\n  onTouchStart = (e: TouchEvent, handleID: string) => {\n    if (isNotValidTouch(e)) {\n      return;\n    }\n\n    this.onStart(e, handleID, true);\n  };\n\n  onStart(e: MouseEvent | TouchEvent, handleID: string, isTouch: boolean) {\n    const {\n      state: { handles },\n      props: { onSlideStart = noop },\n    } = this;\n\n    if (!isTouch) {\n      e.preventDefault && e.preventDefault();\n    }\n\n    e.stopPropagation && e.stopPropagation();\n\n    const found = handles.find((value) => {\n      return value.key === handleID;\n    });\n\n    if (found) {\n      this.setState({ activeHandleID: handleID });\n      onSlideStart(\n        handles.map((d) => d.val),\n        { activeHandleID: handleID }\n      );\n      isTouch ? this.addTouchEvents() : this.addMouseEvents();\n    } else {\n      this.setState({ activeHandleID: '' });\n      this.handleRailAndTrackClicks(e, isTouch);\n    }\n  }\n\n  handleRailAndTrackClicks(e: MouseEvent | TouchEvent, isTouch: boolean) {\n    const {\n      state: { handles: curr, pixelToStep },\n      props: { vertical, reversed = false },\n    } = this;\n    const { slider } = this;\n\n    // double check the dimensions of the slider\n    // @ts-ignore\n    pixelToStep.setDomain(getSliderDomain(slider.current, vertical));\n\n    // find the closest value (aka step) to the event location\n    let updateValue: number;\n\n    if (isTouch) {\n      // @ts-ignore\n      updateValue = pixelToStep.getValue(getTouchPosition(vertical, e));\n    } else {\n      // @ts-ignore\n      updateValue = pixelToStep.getValue(vertical ? e.clientY : e.pageX);\n    }\n\n    // find the closest handle key\n    let updateKey = '';\n    let minDiff = Infinity;\n\n    for (let i = 0; i < curr.length; i++) {\n      const { key, val } = curr[i];\n      const diff = Math.abs(val - updateValue);\n\n      if (diff < minDiff) {\n        updateKey = key;\n        minDiff = diff;\n      }\n    }\n\n    // generate a \"candidate\" set of values - a suggestion of what to do\n    const nextHandles = getUpdatedHandles(\n      curr,\n      updateKey,\n      updateValue,\n      reversed\n    );\n\n    // submit the candidate values\n    this.setState({ activeHandleID: updateKey }, () => {\n      this.submitUpdate(nextHandles, true);\n      isTouch ? this.addTouchEvents() : this.addMouseEvents();\n    });\n  }\n\n  getEventData = (e: React.MouseEvent | React.TouchEvent, isTouch: boolean) => {\n    const {\n      state: { pixelToStep, valueToPerc },\n      props: { vertical },\n    } = this;\n\n    // double check the dimensions of the slider\n    // @ts-ignore\n    pixelToStep.setDomain(getSliderDomain(this.slider.current, vertical));\n\n    let value;\n\n    if (isTouch && e instanceof TouchEvent) {\n      // @ts-ignore\n      value = pixelToStep.getValue(getTouchPosition(vertical, e));\n    } else if (e instanceof MouseEvent) {\n      // @ts-ignore\n      value = pixelToStep.getValue(vertical ? e.clientY : e.pageX);\n    }\n    return {\n      value,\n      // @ts-ignore\n      percent: valueToPerc.getValue(value),\n    };\n  };\n\n  addMouseEvents() {\n    if (isBrowser) {\n      document.addEventListener('mousemove', this.onMouseMove);\n      document.addEventListener('mouseup', this.onMouseUp);\n    }\n  }\n\n  addTouchEvents() {\n    if (isBrowser) {\n      document.addEventListener('touchmove', this.onTouchMove);\n      document.addEventListener('touchend', this.onTouchEnd);\n    }\n  }\n\n  onMouseMove = (e: MouseEvent) => {\n    const {\n      state: { handles: curr, pixelToStep, activeHandleID = '' },\n      props: { vertical, reversed = false },\n    } = this;\n    // double check the dimensions of the slider\n    // @ts-ignore\n    pixelToStep.setDomain(getSliderDomain(this.slider.current, vertical));\n\n    // find the closest value (aka step) to the event location\n    // @ts-ignore\n    const updateValue = pixelToStep.getValue(vertical ? e.clientY : e.pageX);\n\n    // generate a \"candidate\" set of values - a suggestion of what to do\n    const nextHandles = getUpdatedHandles(\n      curr,\n      activeHandleID,\n      updateValue,\n      reversed\n    );\n\n    // submit the candidate values\n    this.submitUpdate(nextHandles);\n  };\n\n  onTouchMove = (e: TouchEvent) => {\n    const {\n      state: { handles: curr, pixelToStep, activeHandleID },\n      props: { vertical, reversed },\n    } = this;\n    if (pixelToStep === null || isNotValidTouch(e)) {\n      return;\n    }\n\n    // double check the dimensions of the slider\n    // @ts-ignore\n    pixelToStep.setDomain(getSliderDomain(this.slider.current, vertical));\n\n    // find the closest value (aka step) to the event location\n    // @ts-ignore\n    const updateValue = pixelToStep.getValue(getTouchPosition(vertical, e));\n\n    // generate a \"candidate\" set of values - a suggestion of what to do\n    const nextHandles = getUpdatedHandles(\n      curr,\n      activeHandleID,\n      updateValue,\n      reversed\n    );\n\n    // submit the candidate values\n    this.submitUpdate(nextHandles);\n  };\n\n  submitUpdate(next: HandleItem[], callOnChange = false) {\n    const {\n      mode = 1,\n      step = 0.1,\n      onUpdate = noop,\n      onChange = noop,\n      reversed = false,\n    } = this.props;\n    //@ts-ignore\n    const { getValue } = this.state.valueToStep;\n\n    this.setState(({ handles: curr }) => {\n      let handles: HandleItem[] = [];\n\n      // given the current handles and a candidate set, decide what to do\n      if (typeof mode === 'function') {\n        handles = mode(curr, next, step, reversed, getValue);\n        warning(\n          Array.isArray(handles),\n          'Custom mode function did not return an array.'\n        );\n      } else {\n        switch (mode) {\n          case 1:\n            handles = mode1(curr, next);\n            break;\n          case 2:\n            handles = mode2(curr, next);\n            break;\n          case 3:\n            handles = mode3(curr, next, step, reversed, getValue);\n            break;\n          default:\n            handles = next;\n            warning(false, `${prfx} Invalid mode value.`);\n        }\n      }\n\n      onUpdate(handles.map((d) => d.val));\n\n      if (callOnChange) {\n        onChange(handles.map((d) => d.val));\n      }\n\n      return { handles };\n    });\n  }\n\n  onMouseUp = () => {\n    const {\n      state: { handles = [], activeHandleID },\n      props: { onChange = noop, onSlideEnd = noop },\n    } = this;\n\n    onChange(handles.map((d) => d.val));\n    onSlideEnd(\n      handles.map((d) => d.val),\n      { activeHandleID }\n    );\n\n    this.setState({ activeHandleID: '' });\n\n    if (isBrowser) {\n      document.removeEventListener('mousemove', this.onMouseMove);\n      document.removeEventListener('mouseup', this.onMouseUp);\n    }\n  };\n\n  onTouchEnd = () => {\n    const {\n      state: { handles, activeHandleID },\n      props: { onChange = noop, onSlideEnd = noop },\n    } = this;\n\n    onChange(handles.map((d) => d.val));\n    onSlideEnd(\n      handles.map((d) => d.val),\n      { activeHandleID }\n    );\n\n    this.setState({ activeHandleID: '' });\n\n    if (isBrowser) {\n      document.removeEventListener('touchmove', this.onTouchMove);\n      document.removeEventListener('touchend', this.onTouchEnd);\n    }\n  };\n\n  render() {\n    const {\n      state: { handles, valueToPerc, activeHandleID },\n      props: {\n        className,\n        rootStyle = {},\n        rootProps = {},\n        component: Comp = 'div',\n        disabled = false,\n        flatten = false,\n      },\n    } = this;\n\n    const mappedHandles = handles.map(({ key, val }) => {\n      // @ts-ignore\n      return { id: key, value: val, percent: valueToPerc.getValue(val) };\n    });\n\n    const children = React.Children.map(this.props.children, (child) => {\n      if (isRCSComponent(child) === true) {\n        return React.cloneElement(child as React.ReactElement, {\n          scale: valueToPerc,\n          handles: mappedHandles,\n          activeHandleID,\n          getEventData: this.getEventData,\n          emitKeyboard: disabled ? noop : this.onKeyDown,\n          emitMouse: disabled ? noop : this.onMouseDown,\n          emitTouch: disabled ? noop : this.onTouchStart,\n        });\n      } else {\n        return child;\n      }\n    });\n\n    return flatten ? (\n      <>\n        {React.createElement(Comp, {\n          ...rootProps,\n          style: rootStyle,\n          className: className,\n          ref: this.slider,\n        })}\n        {children}\n      </>\n    ) : (\n      <>\n        {React.createElement(\n          Comp,\n          {\n            ...rootProps,\n            style: rootStyle,\n            className: className,\n            ref: this.slider,\n          },\n          children\n        )}\n      </>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}