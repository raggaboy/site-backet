{"ast":null,"code":"import PropTypes from 'prop-types';\nimport createConnector from \"../core/createConnector.js\";\nimport { getResults } from \"../core/indexUtils.js\";\nvar MAX_WILDCARD_FACETS = 20;\nexport default createConnector({\n  displayName: 'AlgoliaDynamicWidgets',\n  $$type: 'ais.dynamicWidgets',\n  defaultProps: {\n    transformItems: function transformItems(items) {\n      return items;\n    },\n    maxValuesPerFacet: 20\n  },\n  propTypes: {\n    transformItems: PropTypes.func,\n    facets: PropTypes.arrayOf(PropTypes.string),\n    maxValuesPerFacet: PropTypes.number\n  },\n  getProvidedProps: function getProvidedProps(props, _searchState, searchResults) {\n    var results = getResults(searchResults, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n\n    if (props.facets && !(Array.isArray(props.facets) && props.facets.length <= 1 && (props.facets[0] === '*' || props.facets[0] === undefined))) {\n      throw new Error(\"The `facets` prop only accepts [] or [\\\"*\\\"], you passed \".concat(JSON.stringify(props.facets)));\n    }\n\n    if (!results) {\n      return {\n        attributesToRender: []\n      };\n    }\n\n    var facetOrder = results.renderingContent && results.renderingContent.facetOrdering && results.renderingContent.facetOrdering.facets && results.renderingContent.facetOrdering.facets.order || [];\n    var attributesToRender = props.transformItems(facetOrder, {\n      results: results\n    });\n\n    if (attributesToRender.length > MAX_WILDCARD_FACETS && !props.facets) {\n      // eslint-disable-next-line no-console\n      console.warn(\"More than \".concat(MAX_WILDCARD_FACETS, \" facets are requested to be displayed without explicitly setting which facets to retrieve. This could have a performance impact. Set \\\"facets\\\" to [] to do two smaller network requests, or explicitly to ['*'] to avoid this warning.\"));\n    }\n\n    if (props.maxValuesPerFacet < results._state.maxValuesPerFacet) {\n      // eslint-disable-next-line no-console\n      console.warn(\"The maxValuesPerFacet set by dynamic widgets (\".concat(props.maxValuesPerFacet, \") is smaller than one of the limits set by a widget (\").concat(results._state.maxValuesPerFacet, \"). This causes a mismatch in query parameters and thus an extra network request when that widget is mounted.\"));\n    }\n\n    return {\n      attributesToRender: attributesToRender\n    };\n  },\n  getSearchParameters: function getSearchParameters(searchParameters, props) {\n    return (props.facets || ['*']).reduce(function (acc, curr) {\n      return acc.addFacet(curr);\n    }, searchParameters.setQueryParameters({\n      maxValuesPerFacet: Math.max(props.maxValuesPerFacet || 0, searchParameters.maxValuesPerFacet || 0)\n    }));\n  }\n});","map":{"version":3,"names":["PropTypes","createConnector","getResults","MAX_WILDCARD_FACETS","displayName","$$type","defaultProps","transformItems","items","maxValuesPerFacet","propTypes","func","facets","arrayOf","string","number","getProvidedProps","props","_searchState","searchResults","results","ais","contextValue","multiIndexContext","indexContextValue","Array","isArray","length","undefined","Error","concat","JSON","stringify","attributesToRender","facetOrder","renderingContent","facetOrdering","order","console","warn","_state","getSearchParameters","searchParameters","reduce","acc","curr","addFacet","setQueryParameters","Math","max"],"sources":["/home/dedm/Documents/sript/lab3-script/node_modules/react-instantsearch-core/dist/es/connectors/connectDynamicWidgets.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport createConnector from \"../core/createConnector.js\";\nimport { getResults } from \"../core/indexUtils.js\";\nvar MAX_WILDCARD_FACETS = 20;\nexport default createConnector({\n  displayName: 'AlgoliaDynamicWidgets',\n  $$type: 'ais.dynamicWidgets',\n  defaultProps: {\n    transformItems: function transformItems(items) {\n      return items;\n    },\n    maxValuesPerFacet: 20\n  },\n  propTypes: {\n    transformItems: PropTypes.func,\n    facets: PropTypes.arrayOf(PropTypes.string),\n    maxValuesPerFacet: PropTypes.number\n  },\n  getProvidedProps: function getProvidedProps(props, _searchState, searchResults) {\n    var results = getResults(searchResults, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n\n    if (props.facets && !(Array.isArray(props.facets) && props.facets.length <= 1 && (props.facets[0] === '*' || props.facets[0] === undefined))) {\n      throw new Error(\"The `facets` prop only accepts [] or [\\\"*\\\"], you passed \".concat(JSON.stringify(props.facets)));\n    }\n\n    if (!results) {\n      return {\n        attributesToRender: []\n      };\n    }\n\n    var facetOrder = results.renderingContent && results.renderingContent.facetOrdering && results.renderingContent.facetOrdering.facets && results.renderingContent.facetOrdering.facets.order || [];\n    var attributesToRender = props.transformItems(facetOrder, {\n      results: results\n    });\n\n    if (attributesToRender.length > MAX_WILDCARD_FACETS && !props.facets) {\n      // eslint-disable-next-line no-console\n      console.warn(\"More than \".concat(MAX_WILDCARD_FACETS, \" facets are requested to be displayed without explicitly setting which facets to retrieve. This could have a performance impact. Set \\\"facets\\\" to [] to do two smaller network requests, or explicitly to ['*'] to avoid this warning.\"));\n    }\n\n    if (props.maxValuesPerFacet < results._state.maxValuesPerFacet) {\n      // eslint-disable-next-line no-console\n      console.warn(\"The maxValuesPerFacet set by dynamic widgets (\".concat(props.maxValuesPerFacet, \") is smaller than one of the limits set by a widget (\").concat(results._state.maxValuesPerFacet, \"). This causes a mismatch in query parameters and thus an extra network request when that widget is mounted.\"));\n    }\n\n    return {\n      attributesToRender: attributesToRender\n    };\n  },\n  getSearchParameters: function getSearchParameters(searchParameters, props) {\n    return (props.facets || ['*']).reduce(function (acc, curr) {\n      return acc.addFacet(curr);\n    }, searchParameters.setQueryParameters({\n      maxValuesPerFacet: Math.max(props.maxValuesPerFacet || 0, searchParameters.maxValuesPerFacet || 0)\n    }));\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}